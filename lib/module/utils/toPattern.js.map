{"version":3,"names":["DIGIT","ALPHA","ALPHANUM","MINUTES","SECONDS","HOURS","DIGIT_SPACE","DIGIT_SPACE_PLUS_MINUS","ALPHA_SPACE","ALPHANUM_SPACE","CHAR","CHAR_SPACE","ESCAPE","addPlaceholder","toPattern","value","optionPattern","pattern","patternChars","output","split","values","toString","charsValues","placeholder","undefined","charCounter","index","outputLength","length","join","match","substr"],"sources":["toPattern.ts"],"sourcesContent":["import { DIGIT, ALPHA, ALPHANUM, MINUTES, SECONDS, HOURS, DIGIT_SPACE, DIGIT_SPACE_PLUS_MINUS, ALPHA_SPACE, ALPHANUM_SPACE, CHAR, CHAR_SPACE, ESCAPE } from './constants'\nimport addPlaceholder from './addPlaceholder'\n\ntype OptionPattern = {\n  pattern: string\n  placeholder: string\n}\n\n/**\n * function toPattern\n * @param {number | string} value\n * @param {string | OptionPattern} optionPattern\n * @returns {string}\n */\nfunction toPattern(\n  value: number | string,\n  optionPattern: string | OptionPattern\n): string {\n  const pattern =\n    typeof optionPattern === 'object' ? optionPattern.pattern : optionPattern\n  const patternChars = pattern\n  const output = pattern.split('')\n  const values = value.toString()\n  const charsValues = values\n  const placeholder =\n    typeof optionPattern === 'object' ? optionPattern.placeholder : undefined\n  let charCounter = 0\n  let index\n\n  const outputLength = output.length\n  for (index = 0; index < outputLength; index++) {\n    // console.log('checking',output[index],'against',values[charCounter]);\n    // Reached the end of input\n    if (charCounter >= values.length) {\n      if (patternChars.length === charsValues.length) {\n        // console.log('###1', output);\n        return output.join('')\n      }\n      if (\n        placeholder !== undefined &&\n        patternChars.length > charsValues.length\n      ) {\n        // console.log('###2', 'addPlaceholder', {output, index, placeholder});\n        return addPlaceholder(output, index, placeholder).join('')\n      }\n      break\n    } else if (\n      (output[index] === DIGIT && values[charCounter].match(/\\d/)) ||\n      (output[index] === DIGIT_SPACE && values[charCounter].match(/[\\d\\s]/)) ||\n      (output[index] === DIGIT_SPACE_PLUS_MINUS && values[charCounter].match(/[\\d\\s+-]/)) ||\n\n      (output[index] === ALPHA && values[charCounter].match(/[a-zA-Z]/)) ||\n      (output[index] === ALPHA_SPACE && values[charCounter].match(/[a-zA-Z\\s]/)) ||\n      (output[index] === ALPHANUM && values[charCounter].match(/[a-zA-Z0-9]/)) ||\n      (output[index] === ALPHANUM_SPACE && values[charCounter].match(/[a-zA-Z0-9\\s]/)) ||\n      (output[index] === CHAR && values[charCounter].match(/[\\S]/)) ||\n      (output[index] === CHAR_SPACE && values[charCounter].match(/./)) ||\n\n      (output[index] === HOURS && values[charCounter].match(/[0-23]/)) ||\n      (output[index] === MINUTES && values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && values[charCounter].match(/[0-59]/))\n    ) {\n      // console.log('###3', 'match expression', {\n      //   index,\n      //   'output[index]': output[index],\n      //   'values[charCounter++]': values[charCounter+1],\n      // });\n      output[index] = values[charCounter++]\n    } else if (\n      (output[index] === DIGIT && !values[charCounter].match(/\\d/)) ||\n      (output[index] === DIGIT_SPACE && !values[charCounter].match(/[\\d\\s]/)) ||\n      (output[index] === DIGIT_SPACE_PLUS_MINUS && !values[charCounter].match(/[\\d\\s+-]/)) ||\n\n      (output[index] === ALPHA && !values[charCounter].match(/[a-zA-Z]/)) ||\n      (output[index] === ALPHA_SPACE && !values[charCounter].match(/[a-zA-Z\\s]/)) ||\n      (output[index] === ALPHANUM && !values[charCounter].match(/[a-zA-Z0-9]/)) ||\n      (output[index] === ALPHANUM_SPACE && !values[charCounter].match(/[a-zA-Z0-9\\s]/)) ||\n      (output[index] === CHAR && !values[charCounter].match(/[\\S]/)) ||\n      (output[index] === CHAR_SPACE && !values[charCounter].match(/./)) ||\n\n      (output[index] === HOURS && !values[charCounter].match(/[0-23]/)) ||\n      (output[index] === MINUTES && !values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && !values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && !values[charCounter].match(/[0-59]/))\n    ) {\n      if (placeholder !== undefined) {\n          // console.log('###4', 'placeholder', {output, index, placeholder});\n          return addPlaceholder(output, index, placeholder).join('')\n      }\n      // console.log('###5', 'invalid character retry with next character', {output, index, placeholder, thisSlice:output.slice(0, index).join('')});\n      // return output.slice(0, index).join('')\n      index--\n      charCounter++\n      // output[index] = values[charCounter++]\n\n      // escape character so move index up and have a literal character\n    } else if (output[index] === ESCAPE)\n    {\n      // console.log('###6', 'escape', {index: index+1,charCounter: charCounter+2});\n      index++\n      charCounter++\n      charCounter++\n      // exact match for a non-magic character\n    } else if (output[index] === values[charCounter]) {\n      // console.log('###7', 'non-magic', {charCounter: charCounter+1});\n      charCounter++\n    }\n  // console.log('output so far', output);\n  }\n  // console.log('###8', output.join('').substr(0, index), {output, index});\n  return output.join('').substr(0, index)\n}\n\nexport default toPattern\n"],"mappings":"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"}