{"version":3,"names":["toPattern","value","optionPattern","pattern","patternChars","output","split","values","toString","charsValues","placeholder","undefined","charCounter","index","outputLength","length","join","addPlaceholder","DIGIT","match","DIGIT_SPACE","DIGIT_SPACE_PLUS_MINUS","ALPHA","ALPHA_SPACE","ALPHANUM","ALPHANUM_SPACE","CHAR","CHAR_SPACE","HOURS","MINUTES","SECONDS","ESCAPE","substr"],"sources":["toPattern.ts"],"sourcesContent":["import { DIGIT, ALPHA, ALPHANUM, MINUTES, SECONDS, HOURS, DIGIT_SPACE, DIGIT_SPACE_PLUS_MINUS, ALPHA_SPACE, ALPHANUM_SPACE, CHAR, CHAR_SPACE, ESCAPE } from './constants'\nimport addPlaceholder from './addPlaceholder'\n\ntype OptionPattern = {\n  pattern: string\n  placeholder: string\n}\n\n/**\n * function toPattern\n * @param {number | string} value\n * @param {string | OptionPattern} optionPattern\n * @returns {string}\n */\nfunction toPattern(\n  value: number | string,\n  optionPattern: string | OptionPattern\n): string {\n  const pattern =\n    typeof optionPattern === 'object' ? optionPattern.pattern : optionPattern\n  const patternChars = pattern\n  const output = pattern.split('')\n  const values = value.toString()\n  const charsValues = values\n  const placeholder =\n    typeof optionPattern === 'object' ? optionPattern.placeholder : undefined\n  let charCounter = 0\n  let index\n\n  const outputLength = output.length\n  for (index = 0; index < outputLength; index++) {\n    // console.log('checking',output[index],'against',values[charCounter]);\n    // Reached the end of input\n    if (charCounter >= values.length) {\n      if (patternChars.length === charsValues.length) {\n        // console.log('###1', output);\n        return output.join('')\n      }\n      if (\n        placeholder !== undefined &&\n        patternChars.length > charsValues.length\n      ) {\n        // console.log('###2', 'addPlaceholder', {output, index, placeholder});\n        return addPlaceholder(output, index, placeholder).join('')\n      }\n      break\n    } else if (\n      (output[index] === DIGIT && values[charCounter].match(/\\d/)) ||\n      (output[index] === DIGIT_SPACE && values[charCounter].match(/[\\d\\s]/)) ||\n      (output[index] === DIGIT_SPACE_PLUS_MINUS && values[charCounter].match(/[\\d\\s+-]/)) ||\n\n      (output[index] === ALPHA && values[charCounter].match(/[a-zA-Z]/)) ||\n      (output[index] === ALPHA_SPACE && values[charCounter].match(/[a-zA-Z\\s]/)) ||\n      (output[index] === ALPHANUM && values[charCounter].match(/[a-zA-Z0-9]/)) ||\n      (output[index] === ALPHANUM_SPACE && values[charCounter].match(/[a-zA-Z0-9\\s]/)) ||\n      (output[index] === CHAR && values[charCounter].match(/[\\S]/)) ||\n      (output[index] === CHAR_SPACE && values[charCounter].match(/./)) ||\n\n      (output[index] === HOURS && values[charCounter].match(/[0-23]/)) ||\n      (output[index] === MINUTES && values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && values[charCounter].match(/[0-59]/))\n    ) {\n      // console.log('###3', 'match expression', {\n      //   index,\n      //   'output[index]': output[index],\n      //   'values[charCounter++]': values[charCounter+1],\n      // });\n      output[index] = values[charCounter++]\n    } else if (\n      (output[index] === DIGIT && !values[charCounter].match(/\\d/)) ||\n      (output[index] === DIGIT_SPACE && !values[charCounter].match(/[\\d\\s]/)) ||\n      (output[index] === DIGIT_SPACE_PLUS_MINUS && !values[charCounter].match(/[\\d\\s+-]/)) ||\n\n      (output[index] === ALPHA && !values[charCounter].match(/[a-zA-Z]/)) ||\n      (output[index] === ALPHA_SPACE && !values[charCounter].match(/[a-zA-Z\\s]/)) ||\n      (output[index] === ALPHANUM && !values[charCounter].match(/[a-zA-Z0-9]/)) ||\n      (output[index] === ALPHANUM_SPACE && !values[charCounter].match(/[a-zA-Z0-9\\s]/)) ||\n      (output[index] === CHAR && !values[charCounter].match(/[\\S]/)) ||\n      (output[index] === CHAR_SPACE && !values[charCounter].match(/./)) ||\n\n      (output[index] === HOURS && !values[charCounter].match(/[0-23]/)) ||\n      (output[index] === MINUTES && !values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && !values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && !values[charCounter].match(/[0-59]/))\n    ) {\n      if (placeholder !== undefined) {\n          // console.log('###4', 'placeholder', {output, index, placeholder});\n          return addPlaceholder(output, index, placeholder).join('')\n      }\n      // console.log('###5', 'invalid character retry with next character', {output, index, placeholder, thisSlice:output.slice(0, index).join('')});\n      // return output.slice(0, index).join('')\n      index--\n      charCounter++\n      // output[index] = values[charCounter++]\n\n      // escape character so move index up and have a literal character\n    } else if (output[index] === ESCAPE)\n    {\n      // console.log('###6', 'escape', {index: index+1,charCounter: charCounter+2});\n      index++\n      charCounter++\n      charCounter++\n      // exact match for a non-magic character\n    } else if (output[index] === values[charCounter]) {\n      // console.log('###7', 'non-magic', {charCounter: charCounter+1});\n      charCounter++\n    }\n  // console.log('output so far', output);\n  }\n  // console.log('###8', output.join('').substr(0, index), {output, index});\n  return output.join('').substr(0, index)\n}\n\nexport default toPattern\n"],"mappings":"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"}