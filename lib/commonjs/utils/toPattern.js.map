{"version":3,"names":["toPattern","value","optionPattern","pattern","patternChars","output","split","values","toString","charsValues","placeholder","undefined","charCounter","index","outputLength","length","console","log","join","addPlaceholder","DIGIT","match","DIGIT_SPACE","DIGIT_SPACE_PLUS_MINUS","ALPHA","ALPHA_SPACE","ALPHANUM","ALPHANUM_SPACE","CHAR","CHAR_SPACE","HOURS","MINUTES","SECONDS","thisSlice","slice","ESCAPE","substr"],"sources":["toPattern.ts"],"sourcesContent":["import { DIGIT, ALPHA, ALPHANUM, MINUTES, SECONDS, HOURS, DIGIT_SPACE, DIGIT_SPACE_PLUS_MINUS, ALPHA_SPACE, ALPHANUM_SPACE, CHAR, CHAR_SPACE, ESCAPE } from './constants'\nimport addPlaceholder from './addPlaceholder'\n\ntype OptionPattern = {\n  pattern: string\n  placeholder: string\n}\n\n/**\n * function toPattern\n * @param {number | string} value\n * @param {string | OptionPattern} optionPattern\n * @returns {string}\n */\nfunction toPattern(\n  value: number | string,\n  optionPattern: string | OptionPattern\n): string {\n  const pattern =\n    typeof optionPattern === 'object' ? optionPattern.pattern : optionPattern\n  const patternChars = pattern\n  const output = pattern.split('')\n  const values = value.toString()\n  const charsValues = values\n  const placeholder =\n    typeof optionPattern === 'object' ? optionPattern.placeholder : undefined\n  let charCounter = 0\n  let index\n\n  const outputLength = output.length\n  for (index = 0; index < outputLength; index++) {\n    console.log('checking',output[index],'against',values[charCounter]);\n    // Reached the end of input\n    if (charCounter >= values.length) {\n      if (patternChars.length === charsValues.length) {\n        console.log('###1', output);\n        return output.join('')\n      }\n      if (\n        placeholder !== undefined &&\n        patternChars.length > charsValues.length\n      ) {\n        console.log('###2', 'addPlaceholder', {output, index, placeholder});\n        return addPlaceholder(output, index, placeholder).join('')\n      }\n      break\n    } else if (\n      (output[index] === DIGIT && values[charCounter].match(/\\d/)) ||\n      (output[index] === DIGIT_SPACE && values[charCounter].match(/[\\d\\s]/)) ||\n      (output[index] === DIGIT_SPACE_PLUS_MINUS && values[charCounter].match(/[\\d\\s+-]/)) ||\n\n      (output[index] === ALPHA && values[charCounter].match(/[a-zA-Z]/)) ||\n      (output[index] === ALPHA_SPACE && values[charCounter].match(/[a-zA-Z\\s]/)) ||\n      (output[index] === ALPHANUM && values[charCounter].match(/[a-zA-Z0-9]/)) ||\n      (output[index] === ALPHANUM_SPACE && values[charCounter].match(/[a-zA-Z0-9\\s]/)) ||\n      (output[index] === CHAR && values[charCounter].match(/[\\S]/)) ||\n      (output[index] === CHAR_SPACE && values[charCounter].match(/./)) ||\n\n      (output[index] === HOURS && values[charCounter].match(/[0-23]/)) ||\n      (output[index] === MINUTES && values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && values[charCounter].match(/[0-59]/))\n    ) {\n      console.log('###3', 'match expression', {\n        index,\n        'output[index]': output[index],\n        'values[charCounter++]': values[charCounter+1],\n      });\n      output[index] = values[charCounter++]\n    } else if (\n      (output[index] === DIGIT && !values[charCounter].match(/\\d/)) ||\n      (output[index] === DIGIT_SPACE && !values[charCounter].match(/[\\d\\s]/)) ||\n      (output[index] === DIGIT_SPACE_PLUS_MINUS && !values[charCounter].match(/[\\d\\s+-]/)) ||\n\n      (output[index] === ALPHA && !values[charCounter].match(/[a-zA-Z]/)) ||\n      (output[index] === ALPHA_SPACE && !values[charCounter].match(/[a-zA-Z\\s]/)) ||\n      (output[index] === ALPHANUM && !values[charCounter].match(/[a-zA-Z0-9]/)) ||\n      (output[index] === ALPHANUM_SPACE && !values[charCounter].match(/[a-zA-Z0-9\\s]/)) ||\n      (output[index] === CHAR && !values[charCounter].match(/[\\S]/)) ||\n      (output[index] === CHAR_SPACE && !values[charCounter].match(/./)) ||\n\n      (output[index] === HOURS && !values[charCounter].match(/[0-23]/)) ||\n      (output[index] === MINUTES && !values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && !values[charCounter].match(/[0-59]/)) ||\n      (output[index] === SECONDS && !values[charCounter].match(/[0-59]/))\n    ) {\n      if (placeholder !== undefined) {\n          console.log('###4', 'placeholder', {output, index, placeholder});\n          return addPlaceholder(output, index, placeholder).join('')\n      }\n      console.log('###5', 'invalid character retry with next character', {output, index, placeholder, thisSlice:output.slice(0, index).join('')});\n      // return output.slice(0, index).join('')\n      index--\n      charCounter++\n      // output[index] = values[charCounter++]\n\n      // escape character so move index up and have a literal character\n    } else if (output[index] === ESCAPE)\n    {\n      console.log('###6', 'escape', {index: index+1,charCounter: charCounter+2});\n      index++\n      charCounter++\n      charCounter++\n      // exact match for a non-magic character\n    } else if (output[index] === values[charCounter]) {\n      console.log('###7', 'non-magic', {charCounter: charCounter+1});\n      charCounter++\n    }\n  console.log('output so far', output);\n  }\n  console.log('###8', output.join('').substr(0, index), {output, index});\n  return output.join('').substr(0, index)\n}\n\nexport default toPattern\n"],"mappings":"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"}